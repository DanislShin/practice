<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>English Active Tenses Practice</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
  <style>
    :root {
      --present: #4285f4;
      --past: #ea4335;
      --future: #34a853;
      --continuous: #673ab7;
      --perfect: #fbbc05;
    }
    body {
      font-family: 'Noto Sans KR', sans-serif;
      max-width: 1000px;
      margin: auto;
      padding: 20px;
      line-height: 1.7;
      color: #333;
    }
    h1, h2 {
      color: #202124;
      border-bottom: 2px solid #4285f4;
      padding-bottom: 10px;
    }
    h2 { margin-top: 30px; }
    button {
      margin: 5px 5px 10px 0;
      padding: 8px 15px;
      background-color: #4285f4;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.9em;
    }
    .tense-section {
      background: #f8f9fa;
      border-radius: 8px;
      padding: 15px;
      margin-bottom: 25px;
    }
    .usage {
      margin: 20px 0;
      padding-left: 15px;
      border-left: 3px solid #ddd;
    }
    .sentence-block {
      padding: 15px;
      border: 1px solid #e0e0e0;
      border-radius: 6px;
      background: white;
      margin: 10px 0;
      position: relative;
    }
    .tense-label {
      display: inline-block;
      padding: 4px 10px;
      background: var(--tense-color);
      color: white;
      border-radius: 4px;
      font-size: 0.85em;
      font-weight: bold;
      margin-right: 8px;
    }
    .form-label {
      display: inline-block;
      padding: 4px 8px;
      background: #5f6368;
      color: white;
      border-radius: 4px;
      font-size: 0.75em;
    }
    audio { 
      display: block;
      margin: 12px 0;
      width: 100%;
    }
    .translation {
      margin-top: 10px;
      padding: 10px;
      background: #e8f0fe;
      border-radius: 4px;
    }
    .hidden { display: none; }
    .checkmark {
      position: absolute;
      right: 15px;
      top: 15px;
      color: #34a853;
      font-size: 20px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 15px 0;
    }
    th, td {
      border: 1px solid #ddd;
      padding: 8px;
      text-align: left;
    }
    th {
      background-color: #f2f2f2;
    }
  </style>
</head>
<body>
  <h1>English Active Tenses Practice</h1>
  <button onclick="downloadAllRecordings()">üì• Download All Recordings</button>
  <div id="content"></div>

  <script>
    const grammarData = [
      // ======= Îã®Ïàú ÌòÑÏû¨ (Simple Present) =======
      {
        tense: "Simple Present",
        color: "var(--present)",
        usages: [
          {
            title: "Ïö©Î≤ï 1: ÌòÑÏû¨Ïùò ÏÉÅÌÉú (ÏÜåÏú†, Í∞êÏ†ï, ÏÉùÍ∞Å, Ï°¥Ïû¨)",
            examples: [
              { en: "I have a car.", ko: "ÎÇòÎäî Ï∞®Î•º Í∞ÄÏßÄÍ≥† ÏûàÏñ¥Ïöî.", form: "Í∏çÏ†ïÎ¨∏" },
              { en: "I don‚Äôt have a car.", ko: "ÎÇòÎäî Ï∞®Î•º Í∞ÄÏßÄÍ≥† ÏûàÏßÄ ÏïäÏïÑÏöî.", form: "Î∂ÄÏ†ïÎ¨∏" },
              { en: "Do you have a car?", ko: "ÎÑà Ï∞® Í∞ÄÏßÄÍ≥† ÏûàÏñ¥?", form: "ÏùòÎ¨∏Î¨∏" },
              { en: "Don‚Äôt you have a car?", ko: "ÎÑà Ï∞® Ïïà Í∞ÄÏßÄÍ≥† ÏûàÏñ¥?", form: "Î∂ÄÏ†ïÏùòÎ¨∏Î¨∏" }
            ]
          },
          {
            title: "Ïö©Î≤ï 2: ÏäµÍ¥ÄÏù¥ÎÇò ÏùºÏÉÅ (Î∞òÎ≥µÎêòÎäî ÌñâÎèô)",
            examples: [
              { en: "He goes to school every day.", ko: "Í∑∏Îäî Îß§Ïùº ÌïôÍµêÏóê Í∞ÄÏöî.", form: "Í∏çÏ†ïÎ¨∏" },
              { en: "He doesn‚Äôt go to school every day.", ko: "Í∑∏Îäî Îß§Ïùº ÌïôÍµêÏóê Í∞ÄÏßÄ ÏïäÏïÑÏöî.", form: "Î∂ÄÏ†ïÎ¨∏" },
              { en: "Does he go to school every day?", ko: "Í∑∏Í∞Ä Îß§Ïùº ÌïôÍµêÏóê Í∞Ä?", form: "ÏùòÎ¨∏Î¨∏" },
              { en: "Doesn‚Äôt he go to school every day?", ko: "Í∑∏Í∞Ä Îß§Ïùº ÌïôÍµêÏóê Ïïà Í∞Ä?", form: "Î∂ÄÏ†ïÏùòÎ¨∏Î¨∏" }
            ]
          },
          {
            title: "Ïö©Î≤ï 3: ÏùºÎ∞òÏ†ÅÏù∏ ÏÇ¨Ïã§Ïù¥ÎÇò ÏßÑÎ¶¨",
            examples: [
              { en: "The sun rises in the east.", ko: "Ìï¥Îäî ÎèôÏ™ΩÏóêÏÑú Îñ†Ïöî.", form: "Í∏çÏ†ïÎ¨∏" },
              { en: "The sun doesn‚Äôt rise in the west.", ko: "Ìï¥Îäî ÏÑúÏ™ΩÏóêÏÑú Îú®ÏßÄ ÏïäÏïÑÏöî.", form: "Î∂ÄÏ†ïÎ¨∏" },
              { en: "Does the sun rise in the east?", ko: "Ìï¥Í∞Ä ÎèôÏ™ΩÏóêÏÑú Îñ†?", form: "ÏùòÎ¨∏Î¨∏" },
              { en: "Doesn‚Äôt the sun rise in the east?", ko: "Ìï¥Í∞Ä ÎèôÏ™ΩÏóêÏÑú Ïïà Îñ†?", form: "Î∂ÄÏ†ïÏùòÎ¨∏Î¨∏" }
            ]
          },
          {
            title: "Ïö©Î≤ï 4: Í∞êÏ†ï, ÏùòÍ≤¨, ÏÉÅÌÉú (ÌòÑÏû¨Ïùò ÎäêÎÇåÏù¥ÎÇò ÏÉùÍ∞Å)",
            examples: [
              { en: "I think you‚Äôre right.", ko: "ÎÇòÎäî ÎÑàÍ∞Ä ÎßûÎã§Í≥† ÏÉùÍ∞ÅÌï¥Ïöî.", form: "Í∏çÏ†ïÎ¨∏" },
              { en: "I don‚Äôt think you‚Äôre right.", ko: "ÎÇòÎäî ÎÑàÍ∞Ä ÎßûÎã§Í≥† ÏÉùÍ∞ÅÌïòÏßÄ ÏïäÏïÑÏöî.", form: "Î∂ÄÏ†ïÎ¨∏" },
              { en: "Do you think I‚Äôm right?", ko: "ÎÑà ÎÇ¥Í∞Ä ÎßûÎã§Í≥† ÏÉùÍ∞ÅÌï¥?", form: "ÏùòÎ¨∏Î¨∏" },
              { en: "Don‚Äôt you think I‚Äôm right?", ko: "ÎÑà ÎÇ¥Í∞Ä ÎßûÎã§Í≥† ÏÉùÍ∞Å Ïïà Ìï¥?", form: "Î∂ÄÏ†ïÏùòÎ¨∏Î¨∏" }
            ]
          },
          {
            title: "Ïö©Î≤ï 5: ÏùºÏ†ïÏù¥ÎÇò ÏãúÍ∞ÑÌëú (Ï†ïÌï¥ÏßÑ Ïä§ÏºÄÏ§Ñ)",
            examples: [
              { en: "The train leaves at 6 PM.", ko: "Í∏∞Ï∞®Îäî Ïò§ÌõÑ 6ÏãúÏóê Îñ†ÎÇòÏöî.", form: "Í∏çÏ†ïÎ¨∏" },
              { en: "The train doesn‚Äôt leave at 6 PM.", ko: "Í∏∞Ï∞®Îäî Ïò§ÌõÑ 6ÏãúÏóê Îñ†ÎÇòÏßÄ ÏïäÏïÑÏöî.", form: "Î∂ÄÏ†ïÎ¨∏" },
              { en: "Does the train leave at 6 PM?", ko: "Í∏∞Ï∞®Í∞Ä Ïò§ÌõÑ 6ÏãúÏóê Îñ†ÎÇò?", form: "ÏùòÎ¨∏Î¨∏" },
              { en: "Doesn‚Äôt the train leave at 6 PM?", ko: "Í∏∞Ï∞®Í∞Ä Ïò§ÌõÑ 6ÏãúÏóê Ïïà Îñ†ÎÇò?", form: "Î∂ÄÏ†ïÏùòÎ¨∏Î¨∏" }
            ]
          }
        ]
      },

      // ======= Îã®Ïàú Í≥ºÍ±∞ (Simple Past) =======
      {
        tense: "Simple Past",
        color: "var(--past)",
        usages: [
          {
            title: "Ïö©Î≤ï 1: Í≥ºÍ±∞Ïóê ÏôÑÎ£åÎêú ÌäπÏ†ï ÏÇ¨Í±¥",
            examples: [
              { en: "She visited her grandma last weekend.", ko: "Í∑∏ÎÖÄÎäî ÏßÄÎÇú Ï£ºÎßêÏóê Ìï†Î®∏ÎãàÎ•º Î∞©Î¨∏ÌñàÏñ¥Ïöî.", form: "Í∏çÏ†ïÎ¨∏" },
              { en: "She didn‚Äôt visit her grandma last weekend.", ko: "Í∑∏ÎÖÄÎäî ÏßÄÎÇú Ï£ºÎßêÏóê Ìï†Î®∏ÎãàÎ•º Î∞©Î¨∏ÌïòÏßÄ ÏïäÏïòÏñ¥Ïöî.", form: "Î∂ÄÏ†ïÎ¨∏" },
              { en: "Did she visit her grandma last weekend?", ko: "Í∑∏ÎÖÄÍ∞Ä ÏßÄÎÇú Ï£ºÎßêÏóê Ìï†Î®∏ÎãàÎ•º Î∞©Î¨∏ÌñàÏñ¥?", form: "ÏùòÎ¨∏Î¨∏" },
              { en: "Didn‚Äôt she visit her grandma last weekend?", ko: "Í∑∏ÎÖÄÍ∞Ä ÏßÄÎÇú Ï£ºÎßêÏóê Ìï†Î®∏ÎãàÎ•º Î∞©Î¨∏ÌïòÏßÄ ÏïäÏïòÏñ¥?", form: "Î∂ÄÏ†ïÏùòÎ¨∏Î¨∏" }
            ]
          }
        ]
      },

      // ======= Îã®Ïàú ÎØ∏Îûò (Simple Future) =======
      {
        tense: "Simple Future",
        color: "var(--future)",
        usages: [
          {
            title: "Ïö©Î≤ï 1: ÎØ∏ÎûòÏùò Í≥ÑÌöçÏù¥ÎÇò ÏòàÏ∏°",
            examples: [
              { en: "We will travel to Busan next month.", ko: "Ïö∞Î¶¨Îäî Îã§Ïùå Îã¨Ïóê Î∂ÄÏÇ∞Ïóê Ïó¨Ìñâ Í∞à Í±∞ÏòàÏöî.", form: "Í∏çÏ†ïÎ¨∏" },
              { en: "We won‚Äôt travel to Busan next month.", ko: "Ïö∞Î¶¨Îäî Îã§Ïùå Îã¨Ïóê Î∂ÄÏÇ∞Ïóê Ïó¨Ìñâ Í∞ÄÏßÄ ÏïäÏùÑ Í±∞ÏòàÏöî.", form: "Î∂ÄÏ†ïÎ¨∏" },
              { en: "Will you travel to Busan next month?", ko: "ÎÑà Îã§Ïùå Îã¨Ïóê Î∂ÄÏÇ∞Ïóê Ïó¨Ìñâ Í∞à Í±∞Ïïº?", form: "ÏùòÎ¨∏Î¨∏" },
              { en: "Won‚Äôt you travel to Busan next month?", ko: "ÎÑà Îã§Ïùå Îã¨Ïóê Î∂ÄÏÇ∞Ïóê Ïó¨Ìñâ Ïïà Í∞à Í±∞Ïïº?", form: "Î∂ÄÏ†ïÏùòÎ¨∏Î¨∏" }
            ]
          },
          {
            title: "Ïö©Î≤ï 2: Ï¶âÌù•Ï†ÅÏù∏ Í≤∞Ï†ï",
            examples: [
              { en: "I will call you later.", ko: "ÎÇòÏ§ëÏóê ÎÑàÌïúÌÖå Ï†ÑÌôîÌï†Í≤åÏöî.", form: "Í∏çÏ†ïÎ¨∏" },
              { en: "I won‚Äôt call you later.", ko: "ÎÇòÏ§ëÏóê ÎÑàÌïúÌÖå Ï†ÑÌôî Ïïà Ìï†Í≤åÏöî.", form: "Î∂ÄÏ†ïÎ¨∏" },
              { en: "Will you call me later?", ko: "ÎÇòÏ§ëÏóê ÎÇòÌïúÌÖå Ï†ÑÌôîÌï† Í±∞Ïïº?", form: "ÏùòÎ¨∏Î¨∏" },
              { en: "Won‚Äôt you call me later?", ko: "ÎÇòÏ§ëÏóê ÎÇòÌïúÌÖå Ï†ÑÌôî Ïïà Ìï† Í±∞Ïïº?", form: "Î∂ÄÏ†ïÏùòÎ¨∏Î¨∏" }
            ]
          }
        ]
      },

      // ======= ÌòÑÏû¨ ÏßÑÌñâ (Present Continuous) =======
      {
        tense: "Present Continuous",
        color: "var(--continuous)",
        usages: [
          {
            title: "Ïö©Î≤ï 1: ÏßÄÍ∏à Ïù¥ ÏàúÍ∞Ñ ÏßÑÌñâ Ï§ëÏù∏ Ïùº",
            examples: [
              { en: "He is studying English right now.", ko: "Í∑∏Îäî ÏßÄÍ∏à ÏòÅÏñ¥Î•º Í≥µÎ∂ÄÌïòÍ≥† ÏûàÏñ¥Ïöî.", form: "Í∏çÏ†ïÎ¨∏" },
              { en: "He isn‚Äôt studying English right now.", ko: "Í∑∏Îäî ÏßÄÍ∏à ÏòÅÏñ¥Î•º Í≥µÎ∂ÄÌïòÍ≥† ÏûàÏßÄ ÏïäÏïÑÏöî.", form: "Î∂ÄÏ†ïÎ¨∏" },
              { en: "Is he studying English right now?", ko: "Í∑∏Í∞Ä ÏßÄÍ∏à ÏòÅÏñ¥Î•º Í≥µÎ∂ÄÌïòÍ≥† ÏûàÏñ¥?", form: "ÏùòÎ¨∏Î¨∏" },
              { en: "Isn‚Äôt he studying English right now?", ko: "Í∑∏Í∞Ä ÏßÄÍ∏à ÏòÅÏñ¥Î•º Í≥µÎ∂ÄÌïòÍ≥† ÏûàÏßÄ ÏïäÏïÑ?", form: "Î∂ÄÏ†ïÏùòÎ¨∏Î¨∏" }
            ]
          },
          {
            title: "Ïö©Î≤ï 2: ÌòÑÏû¨ ÏãúÏ†êÏùò ÏùºÏãúÏ†ÅÏù∏ ÌñâÎèô",
            examples: [
              { en: "She is staying at a hotel this week.", ko: "Í∑∏ÎÖÄÎäî Ïù¥Î≤à Ï£ºÏóê Ìò∏ÌÖîÏóê Î¨µÍ≥† ÏûàÏñ¥Ïöî.", form: "Í∏çÏ†ïÎ¨∏" },
              { en: "She isn‚Äôt staying at a hotel this week.", ko: "Í∑∏ÎÖÄÎäî Ïù¥Î≤à Ï£ºÏóê Ìò∏ÌÖîÏóê Î¨µÍ≥† ÏûàÏßÄ ÏïäÏïÑÏöî.", form: "Î∂ÄÏ†ïÎ¨∏" },
              { en: "Is she staying at a hotel this week?", ko: "Í∑∏ÎÖÄÍ∞Ä Ïù¥Î≤à Ï£ºÏóê Ìò∏ÌÖîÏóê Î¨µÍ≥† ÏûàÏñ¥?", form: "ÏùòÎ¨∏Î¨∏" },
              { en: "Isn‚Äôt she staying at a hotel this week?", ko: "Í∑∏ÎÖÄÍ∞Ä Ïù¥Î≤à Ï£ºÏóê Ìò∏ÌÖîÏóê Î¨µÍ≥† ÏûàÏßÄ ÏïäÏïÑ?", form: "Î∂ÄÏ†ïÏùòÎ¨∏Î¨∏" }
            ]
          },
          {
            title: "Ïö©Î≤ï 3: ÎØ∏ÎûòÏùò ÏòàÏ†ïÎêú ÏùºÏù¥ÎÇò Ïä§ÏºÄÏ§Ñ",
            examples: [
              { en: "She is meeting her friend tomorrow.", ko: "Í∑∏ÎÖÄÎäî ÎÇ¥Ïùº ÏπúÍµ¨Î•º ÎßåÎÇ† Í±∞ÏòàÏöî.", form: "Í∏çÏ†ïÎ¨∏" },
              { en: "She isn‚Äôt meeting her friend tomorrow.", ko: "Í∑∏ÎÖÄÎäî ÎÇ¥Ïùº ÏπúÍµ¨Î•º ÎßåÎÇòÏßÄ ÏïäÏùÑ Í±∞ÏòàÏöî.", form: "Î∂ÄÏ†ïÎ¨∏" },
              { en: "Is she meeting her friend tomorrow?", ko: "Í∑∏ÎÖÄÍ∞Ä ÎÇ¥Ïùº ÏπúÍµ¨Î•º ÎßåÎÇ† Í±∞Ïïº?", form: "ÏùòÎ¨∏Î¨∏" },
              { en: "Isn‚Äôt she meeting her friend tomorrow?", ko: "Í∑∏ÎÖÄÍ∞Ä ÎÇ¥Ïùº ÏπúÍµ¨Î•º Ïïà ÎßåÎÇ† Í±∞Ïïº?", form: "Î∂ÄÏ†ïÏùòÎ¨∏Î¨∏" }
            ]
          }
        ]
      },

      // ======= Í≥ºÍ±∞ ÏßÑÌñâ (Past Continuous) =======
      {
        tense: "Past Continuous",
        color: "var(--continuous)",
        usages: [
          {
            title: "Ïö©Î≤ï 1: Í≥ºÍ±∞ ÌäπÏ†ï ÏãúÏ†êÏóê ÏßÑÌñâ Ï§ëÏù¥Îçò Ïùº",
            examples: [
              { en: "They were watching TV when I called.", ko: "Í∑∏Îì§ÏùÄ ÎÇ¥Í∞Ä Ï†ÑÌôîÌñàÏùÑ Îïå TVÎ•º Î≥¥Í≥† ÏûàÏóàÏñ¥Ïöî.", form: "Í∏çÏ†ïÎ¨∏" },
              { en: "They weren‚Äôt watching TV when I called.", ko: "Í∑∏Îì§ÏùÄ ÎÇ¥Í∞Ä Ï†ÑÌôîÌñàÏùÑ Îïå TVÎ•º Î≥¥Í≥† ÏûàÏßÄ ÏïäÏïòÏñ¥Ïöî.", form: "Î∂ÄÏ†ïÎ¨∏" },
              { en: "Were they watching TV when I called?", ko: "Í∑∏Îì§Ïù¥ ÎÇ¥Í∞Ä Ï†ÑÌôîÌñàÏùÑ Îïå TVÎ•º Î≥¥Í≥† ÏûàÏóàÏñ¥?", form: "ÏùòÎ¨∏Î¨∏" },
              { en: "Weren‚Äôt they watching TV when I called?", ko: "Í∑∏Îì§Ïù¥ ÎÇ¥Í∞Ä Ï†ÑÌôîÌñàÏùÑ Îïå TVÎ•º Î≥¥Í≥† ÏûàÏßÄ ÏïäÏïòÏñ¥?", form: "Î∂ÄÏ†ïÏùòÎ¨∏Î¨∏" }
            ]
          }
        ]
      },

      // ======= ÌòÑÏû¨ ÏôÑÎ£å (Present Perfect) =======
      {
        tense: "Present Perfect",
        color: "var(--perfect)",
        usages: [
          {
            title: "Ïö©Î≤ï 1: Í≥ºÍ±∞Î∂ÄÌÑ∞ ÌòÑÏû¨ÍπåÏßÄ Ïù¥Ïñ¥ÏßÑ Í≤ΩÌóò",
            examples: [
              { en: "I have visited Paris three times.", ko: "ÎÇòÎäî ÌååÎ¶¨Î•º ÏÑ∏ Î≤à Î∞©Î¨∏ÌñàÏñ¥Ïöî.", form: "Í∏çÏ†ïÎ¨∏" },
              { en: "I haven‚Äôt visited Paris three times.", ko: "ÎÇòÎäî ÌååÎ¶¨Î•º ÏÑ∏ Î≤à Î∞©Î¨∏ÌïòÏßÄ ÏïäÏïòÏñ¥Ïöî.", form: "Î∂ÄÏ†ïÎ¨∏" },
              { en: "Have you visited Paris three times?", ko: "ÎÑà ÌååÎ¶¨Î•º ÏÑ∏ Î≤à Î∞©Î¨∏ÌñàÏñ¥?", form: "ÏùòÎ¨∏Î¨∏" },
              { en: "Haven‚Äôt you visited Paris three times?", ko: "ÎÑà ÌååÎ¶¨Î•º ÏÑ∏ Î≤à Î∞©Î¨∏ÌïòÏßÄ ÏïäÏïòÏñ¥?", form: "Î∂ÄÏ†ïÏùòÎ¨∏Î¨∏" }
            ]
          },
          {
            title: "Ïö©Î≤ï 2: Î∞©Í∏à ÎÅùÎÇú Ïùº",
            examples: [
              { en: "I have just finished my homework.", ko: "ÎÇòÎäî Î∞©Í∏à ÏàôÏ†úÎ•º ÎÅùÎÉàÏñ¥Ïöî.", form: "Í∏çÏ†ïÎ¨∏" },
              { en: "I haven‚Äôt just finished my homework.", ko: "ÎÇòÎäî Î∞©Í∏à ÏàôÏ†úÎ•º ÎÅùÎÇ¥ÏßÄ ÏïäÏïòÏñ¥Ïöî.", form: "Î∂ÄÏ†ïÎ¨∏" },
              { en: "Have you just finished your homework?", ko: "ÎÑà Î∞©Í∏à ÏàôÏ†ú ÎÅùÎÉàÏñ¥?", form: "ÏùòÎ¨∏Î¨∏" },
              { en: "Haven‚Äôt you just finished your homework?", ko: "ÎÑà Î∞©Í∏à ÏàôÏ†ú Ïïà ÎÅùÎÉàÏñ¥?", form: "Î∂ÄÏ†ïÏùòÎ¨∏Î¨∏" }
            ]
          },
          {
            title: "Ïö©Î≤ï 3: Í≥ºÍ±∞Î∂ÄÌÑ∞ ÌòÑÏû¨ÍπåÏßÄÏùò ÏÉÅÌÉú",
            examples: [
              { en: "We have lived here since 2020.", ko: "Ïö∞Î¶¨Îäî 2020ÎÖÑÎ∂ÄÌÑ∞ Ïó¨Í∏∞ ÏÇ¥ÏïÑÏôîÏñ¥Ïöî.", form: "Í∏çÏ†ïÎ¨∏" },
              { en: "We haven‚Äôt lived here since 2020.", ko: "Ïö∞Î¶¨Îäî 2020ÎÖÑÎ∂ÄÌÑ∞ Ïó¨Í∏∞ ÏÇ¥ÏßÄ ÏïäÏïòÏñ¥Ïöî.", form: "Î∂ÄÏ†ïÎ¨∏" },
              { en: "Have you lived here since 2020?", ko: "ÎÑà 2020ÎÖÑÎ∂ÄÌÑ∞ Ïó¨Í∏∞ ÏÇ¥ÏïÑÏôîÏñ¥?", form: "ÏùòÎ¨∏Î¨∏" },
              { en: "Haven‚Äôt you lived here since 2020?", ko: "ÎÑà 2020ÎÖÑÎ∂ÄÌÑ∞ Ïó¨Í∏∞ ÏÇ¥ÏßÄ ÏïäÏïòÏñ¥?", form: "Î∂ÄÏ†ïÏùòÎ¨∏Î¨∏" }
            ]
          }
        ]
      }
    ];

    const audioBlobs = {};
    const mediaRecorders = {};

    function playTTS(text) {
      const utter = new SpeechSynthesisUtterance(text);
      utter.lang = 'en-US';
      utter.rate = 0.9;
      speechSynthesis.speak(utter);
    }

    async function startRecording(tenseIndex, usageIndex, exampleIndex) {
      const index = `${tenseIndex}-${usageIndex}-${exampleIndex}`;
      try {
        const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
        const recorder = new MediaRecorder(stream);
        const chunks = [];

        recorder.ondataavailable = e => chunks.push(e.data);
        recorder.onstop = () => {
          const blob = new Blob(chunks, { type: 'audio/webm' });
          document.getElementById(`audio-${index}`).src = URL.createObjectURL(blob);
          audioBlobs[index] = blob;
          document.getElementById(`check-${index}`).innerText = '‚úÖ';
        };

        mediaRecorders[index] = recorder;
        recorder.start();
      } catch (error) {
        alert('Microphone access error: ' + error.message);
      }
    }

    function stopRecording(tenseIndex, usageIndex, exampleIndex) {
      const index = `${tenseIndex}-${usageIndex}-${exampleIndex}`;
      if (mediaRecorders[index] && mediaRecorders[index].state !== 'inactive') {
        mediaRecorders[index].stop();
      }
    }

    function toggle(id) {
      const el = document.getElementById(id);
      el.classList.toggle('hidden');
    }

    function downloadAllRecordings() {
      const zip = new JSZip();
      let hasRecordings = false;
      
      Object.keys(audioBlobs).forEach(key => {
        if (audioBlobs[key]) {
          const [t, u, e] = key.split('-');
          const tense = grammarData[t].tense.replace(/ /g, '_');
          const filename = `${tense}_example_${parseInt(e)+1}.webm`;
          zip.file(filename, audioBlobs[key]);
          hasRecordings = true;
        }
      });
      
      if (hasRecordings) {
        zip.generateAsync({ type: 'blob' }).then(content => {
          saveAs(content, 'english_tenses_full_recordings.zip');
        });
      } else {
        alert('No recordings available to download.');
      }
    }

    const container = document.getElementById('content');
    
    grammarData.forEach((tenseData, tenseIndex) => {
      const tenseSection = document.createElement('div');
      tenseSection.className = 'tense-section';
      tenseSection.style.setProperty('--tense-color', tenseData.color);
      
      let tenseHTML = `
        <h2 style="border-color: ${tenseData.color}">
          <span class="tense-label" style="background: ${tenseData.color}">${tenseData.tense}</span>
        </h2>
      `;
      
      tenseData.usages.forEach((usage, usageIndex) => {
        tenseHTML += `
          <div class="usage">
            <h3>${usage.title}</h3>
        `;
        
        usage.examples.forEach((example, exampleIndex) => {
          const index = `${tenseIndex}-${usageIndex}-${exampleIndex}`;
          tenseHTML += `
            <div class="sentence-block">
              <span id="check-${index}" class="checkmark"></span>
              <div>
                <span class="form-label">${example.form}</span>
              </div>
              <p><strong>${example.en}</strong></p>
              <div>
                <button onclick="playTTS('${example.en.replace(/'/g, "\\'")}')">‚ñ∂Ô∏è Listen</button>
                <button onclick="startRecording(${tenseIndex}, ${usageIndex}, ${exampleIndex})">üéôÔ∏è Record</button>
                <button onclick="stopRecording(${tenseIndex}, ${usageIndex}, ${exampleIndex})">‚èπÔ∏è Stop</button>
                <button onclick="toggle('trans-${index}')">üîç Translation</button>
              </div>
              <audio id="audio-${index}" controls></audio>
              <div id="trans-${index}" class="hidden translation">
                <p><strong>Korean:</strong> ${example.ko}</p>
              </div>
            </div>
          `;
        });
        
        tenseHTML += `</div>`;
      });
      
      tenseSection.innerHTML = tenseHTML;
      container.appendChild(tenseSection);
    });
  </script>
</body>
</html>